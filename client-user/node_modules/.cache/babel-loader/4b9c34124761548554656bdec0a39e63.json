{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Documents\\\\GitHub\\\\FCST-web-front\\\\client-user\\\\src\\\\components\\\\Chat\\\\Chat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport queryString from 'query-string'; //used to get data from URL\n\nimport io from \"socket.io-client\";\nimport './Chat.css';\nimport InfoBar from '../InfoBar/InfoBar';\nimport Input from '../Input/Input';\nimport Messages from '../Messages/Messages';\nimport UserContainer from '../UserContainer/UserContainer';\nimport ScrollToBottom from 'react-scroll-to-bottom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet socket;\n\nconst Chat = ({\n  location\n}) => {\n  _s();\n\n  const [name, setName] = useState('');\n  const [room, setRoom] = useState('');\n  const [users, setUsers] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const ENDPOINT = 'localhost:8000';\n  useEffect(() => {\n    const {\n      name,\n      room\n    } = queryString.parse(location.search);\n    socket = io(ENDPOINT);\n    setName(name);\n    setRoom(room);\n    socket.emit('join', {\n      name,\n      room\n    }, error => {\n      if (error) {\n        alert(error);\n      }\n    }); //to send an event - join is event name and the values of name and room\n    //are sent to backend\n\n    return () => {\n      socket.emit('disconnect');\n      socket.off();\n    };\n  }, [ENDPOINT, location.search]); //to update messages array whenever a message is sent by admin or user\n\n  useEffect(() => {\n    socket.on('message', message => {\n      setMessages([...messages, message]);\n    });\n    socket.on(\"roomData\", ({\n      users\n    }) => {\n      setUsers(users);\n    });\n  }, [messages]); //function for sending messages\n\n  const sendMessage = event => {\n    //to prevent refresh when we press key\n    event.preventDefault();\n\n    if (message) {\n      socket.emit('sendMessage', message, () => setMessage(''));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-container\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"logo\",\n              src: \"https://image.flaticon.com/icons/svg/2950/2950581.svg\",\n              alt: \"logo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 13\n            }, this), \"ChatGram\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"conversation-list\",\n          children: /*#__PURE__*/_jsxDEV(UserContainer, {\n            users: users\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"new-message-container\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-title\",\n          children: /*#__PURE__*/_jsxDEV(InfoBar, {\n            room: room\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Messages, {\n          messages: messages,\n          name: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-form\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            message: message,\n            setMessage: setMessage,\n            sendMessage: sendMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Chat, \"39IABpW+u+KGQyqRP8IszzOZecI=\");\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["C:/Users/hp/Documents/GitHub/FCST-web-front/client-user/src/components/Chat/Chat.js"],"names":["React","useState","useEffect","queryString","io","InfoBar","Input","Messages","UserContainer","ScrollToBottom","socket","Chat","location","name","setName","room","setRoom","users","setUsers","message","setMessage","messages","setMessages","ENDPOINT","parse","search","emit","error","alert","off","on","sendMessage","event","preventDefault"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport queryString from 'query-string'; //used to get data from URL\nimport io from \"socket.io-client\";\n\nimport './Chat.css';\nimport InfoBar from '../InfoBar/InfoBar';\nimport Input from '../Input/Input';\nimport Messages from '../Messages/Messages';\nimport UserContainer from '../UserContainer/UserContainer';\n\nimport ScrollToBottom from 'react-scroll-to-bottom';\n\n\nlet socket;\n\nconst Chat = ({location}) => {\n  const [name,setName] = useState('');\n  const [room, setRoom] = useState('');\n  const [users, setUsers] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n\n  const ENDPOINT = 'localhost:8000'\n\n  useEffect(()=>{\n    const {name, room} = queryString.parse(location.search);\n\n    socket = io(ENDPOINT);\n\n    setName(name);\n    setRoom(room);\n\n    socket.emit('join',{name, room}, (error)=>{\n      if(error) {\n              alert(error);\n      }\n    }) //to send an event - join is event name and the values of name and room\n    //are sent to backend\n\n    return ()=>{\n      socket.emit('disconnect');\n      socket.off();\n    }\n  },[ENDPOINT,location.search]);\n\n  //to update messages array whenever a message is sent by admin or user\n  useEffect(()=>{\n    socket.on('message',(message)=>{\n      setMessages([...messages, message]);\n    })\n\n    socket.on(\"roomData\", ({ users }) => {\n      setUsers(users);\n    });\n\n  }, [messages]);\n\n  //function for sending messages\n  const sendMessage = (event)=>{\n\n    //to prevent refresh when we press key\n    event.preventDefault();\n\n    if(message){\n      socket.emit('sendMessage',message, ()=> setMessage(''));\n    }\n  }\n\n  return (\n    <div>\n\n\n    <div className=\"outer\">\n    <div className=\"chat-container\">\n      <div className=\"search-container\">\n        <h1><img className=\"logo\" src=\"https://image.flaticon.com/icons/svg/2950/2950581.svg\" alt=\"logo\"/>ChatGram</h1>\n      </div>\n\n      <div className=\"conversation-list\">\n        <UserContainer users={users}/>\n      </div>\n\n      <div className=\"new-message-container\">\n\n      </div>\n\n      <div className=\"chat-title\">\n        <InfoBar room={room} />\n      </div>\n\n      \n        <Messages messages={messages} name={name} />\n      \n\n      <div className=\"chat-form\">\n        <Input message={message} setMessage={setMessage} sendMessage={sendMessage}/>\n      </div>\n\n    </div>\n\n    </div>\n    </div>\n  )\n}\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}